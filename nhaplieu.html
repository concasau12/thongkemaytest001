<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nh·∫≠p Li·ªáu</title>
  <link rel="stylesheet" href="style.css">
  <style>
    main {
      width: 100%;
      max-width: 900px;
      margin: 20px auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow-x: auto;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    input, select, textarea, button {
      font-size: 15px;
      padding: 8px 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      outline: none;
      transition: 0.2s;
    }
    input:focus, select:focus, textarea:focus {
      border-color: #1abc9c;
      box-shadow: 0 0 3px #1abc9c;
    }
    textarea {
      min-height: 60px;
    }
    .switch-buttons {
      display: flex;
      gap: 10px;
      justify-content: space-between;
    }
    .toggle-btn {
      flex: 1;
      text-align: center;
      cursor: pointer;
      background: #eee;
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 10px;
      transition: 0.2s;
    }
    .toggle-btn.active {
      background-color: #1abc9c;
      color: white;
      border-color: #16a085;
    }
    .pin-group {
      display: flex;
      gap: 10px;
    }
    .buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }
    button {
      cursor: pointer;
      border: none;
      padding: 10px;
      border-radius: 6px;
    }
    button[type="submit"] {
      background-color: #1abc9c;
      color: white;
    }
    button#cancelBtn {
      background-color: #e74c3c;
      color: white;
    }
    #tongContainer {
      margin-top: 15px;
      margin-right: 20px;
    }
    #tongText {
      width: 100%;
      min-height: 80px;
      border: 1px solid #aaa;
      border-radius: 6px;
      padding: 10px;
      resize: vertical;
      font-size: 15px;
    }
    .spec-group {
      display: flex;
      gap: 10px;
    }
    .spec-group select {
      flex: 1;
      font-size: 14px;
      border-radius: 5px;
    }
    .spec-group select option {
      background-color: #f0f0ef;
    }
    header {
      background: #1aa2f0;
      padding: 15px;
      color: #fff;
      text-align: center;
      border-radius: 0 0 10px 10px;
    }
    .nav-bar {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      margin-top: 10px;
    }
    .btn-nav {
      background: #0b5ed7;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
    }
    .search-container {
      display: flex;
      align-items: center;
      background: #fff;
      border-radius: 8px;
      padding: 3px;
    }
    .search-container input {
      border: none;
      outline: none;
      padding: 6px 10px;
      font-size: 14px;
    }
    .search-container button {
      border: none;
      background: #0b5ed7;
      color: white;
      font-size: 16px;
      padding: 6px 10px;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <h2>üì• Nh·∫≠p D·ªØ Li·ªáu M√°y Test</h2>
    <div class="nav-bar">
      <a href="nhaplieu.html" class="btn-nav">Nh·∫≠p li·ªáu</a>
      <div class="search-container">
        <button id="searchBtn">üîç</button>
        <input type="text" id="searchInput" placeholder="Nh·∫≠p ng√†y, t√™n m√°y ho·∫∑c ID..." />
      </div>
      <a href="thongke.html" class="btn-nav">Th·ªëng k√™</a>
    </div>
  </header>
  <main>
  <form id="dataForm">
    <!-- C·ªôt A -->
    <input type="text" id="Ngay" name="Ng√†y" placeholder="Ng√†y / Th√°ng" required>

    <!-- C·ªôt B -->
    <input list="tenMayList" id="TenMay" name="T√™n m√°y" placeholder="T√™n m√°y..." />
    <datalist id="tenMayList"></datalist>

    <!-- C·ªôt C -->
    <input list="cpuList" id="CPU" name="CPU" placeholder="CPU..." />
    <datalist id="cpuList"></datalist>

    <!-- C·ªôt D, E, F -->
    <div class="spec-group">
      <select id="Ram" name="Ram">
        <option value="">Ram</option>
        <option>4</option><option>8</option><option>16</option>
        <option>32</option><option>64</option>
      </select>

      <select id="OCung" name="·ªî c·ª©ng">
        <option value="">·ªî c·ª©ng</option>
        <option>128</option><option>256</option><option>512</option>
        <option>1T</option><option>2T</option>
      </select>

      <select id="ManHinh" name="M√†n h√¨nh">
        <option value="">M√†n h√¨nh</option>
        <option>HD</option><option>FHD</option>
        <option>2K</option><option>3K</option><option>4K</option>
      </select>
    </div>

    <!-- C·ªôt G -->
    <input list="gpuList" id="GPU" name="GPU" placeholder="GPU..." />
    <datalist id="gpuList"></datalist>

    <!-- C·ªôt H, I, J -->
   <div class="switch-buttons">
      <button type="button" class="toggle-btn" data-name="Cam" data-field="Cam">Cam</button>
      <button type="button" class="toggle-btn" data-name="Led" data-field="Led">Led</button>
      <button type="button" class="toggle-btn" data-name="V√¢n" data-field="V√¢n">V√¢n</button>

      <!-- 3 input ·∫©n gi√∫p g·ª≠i d·ªØ li·ªáu ƒë√∫ng c·ªôt -->
      <input type="hidden" name="Cam" id="inputCam">
      <input type="hidden" name="Led" id="inputLed">
      <input type="hidden" name="V√¢n" id="inputVan">
    </div>



    <!-- C·ªôt K -->
    <div class="pin-group">
      <select for="Pin" id="PinLevel">
        <option value="">Ch·ªçn m·ª©c pin</option>
        <option>New</option>
        <option>Full</option>
        <option>Excellent</option>
        <option>Good</option>
        <option>Fair</option>
        <option>Poor</option>
      </select>

      <input id="ThongSoPin" type="text" placeholder="Th√¥ng s·ªë pin...">

      <!-- üîπ ƒê√¢y l√† input ·∫©n ƒë·ªÉ l∆∞u v√†o c·ªôt K -->
      <input type="hidden" name="Pin" id="PinHidden">
    </div>


    <!-- C·ªôt L -->
    <input id="ID" name="ID" placeholder="ID m√°y...">

    <!-- C·ªôt M -->
    <textarea id="TinhTrangVo" name="T√¨nh tr·∫°ng v·ªè" placeholder="T√¨nh tr·∫°ng v·ªè..."></textarea>

    <!-- C·ªôt N -->
    <textarea id="GhiChu" name="Ghi ch√∫" placeholder="Ghi ch√∫..."></textarea>

    <!-- C·ªôt O -->
    <div id="tongContainer">
      <!--<label for="tongText"><b></b></label>-->
      <textarea id="tongText" placeholder="T·ªïng h·ª£p d·ªØ li·ªáu...."></textarea>
      <input type="hidden" name="T·ªïng" id="tongHidden">
    </div>


    <!-- N√∫t -->
    <div class="buttons">
      <button type="submit">üíæ L∆∞u</button>
      <button type="button" id="cancelBtn">‚ùå H·ªßy</button>
    </div>
  </form>
</main>


  <script>
    // --- T·ª± ƒëi·ªÅn ng√†y ---
    const today = new Date();
    const dd = String(today.getDate()).padStart(2, '0');
    const mm = String(today.getMonth() + 1).padStart(2, '0');
    document.getElementById("Ngay").value = `${dd}/${mm}`;
    // --- g·ª£i √Ω t√™n m√°y ---
    document.addEventListener("DOMContentLoaded", () => {
      loadSuggestions();
    });

    // --- B·∫≠t / t·∫Øt c√°c n√∫t Cam / V√¢n / Led ---
   document.querySelectorAll('.toggle-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        btn.classList.toggle('active');
        const field = btn.dataset.field;
        const hiddenInput = document.getElementById(`input${field.charAt(0).toUpperCase() + field.slice(1)}`);
        hiddenInput.value = btn.classList.contains('active') ? 'C√≥' : '';
        updateTong();
      });
    });



    function updateTong() {
      const tongTextEl = document.getElementById("tongText");

      // N·∫øu ng∆∞·ªùi d√πng ƒëang g√µ trong √¥ T·ªïng h·ª£p th√¨ kh√¥ng ghi ƒë√®
      if (document.activeElement === tongTextEl) return;

      const form = document.getElementById("dataForm");
      const data = Object.fromEntries(new FormData(form).entries());
      const activeButtons = [...document.querySelectorAll('.toggle-btn.active')].map(b => b.dataset.name);

      const parts = [];
      if (data["T√™n m√°y"]) parts.push(`- ${data["T√™n m√°y"]}/`);
      if (data["CPU"]) parts.push(` ${data["CPU"]}/`);
      if (data["Ram"]) parts.push(` ${data["Ram"]}GB/`);
      if (data["·ªî c·ª©ng"]) parts.push(` ${data["·ªî c·ª©ng"]}GB/`);
      if (data["M√†n h√¨nh"]) parts.push(` ${data["M√†n h√¨nh"]}/`);
      if (data["GPU"]) parts.push(` ${data["GPU"]}/`);
      if (activeButtons.length > 0) parts.push(` ${activeButtons.join(", ")}/`);
      if (data["Pin"]) parts.push(` Pin ${data["Pin"]}/`);
      if (data["Th√¥ng s·ªë pin"]) parts.push(`- ${data["Th√¥ng s·ªë pin"]}/`);
      if (data["ID"]) parts.push(`${data["ID"]}`);
      if (data["T√¨nh tr·∫°ng v·ªè"]) parts.push(`${data["T√¨nh tr·∫°ng v·ªè"]}/`);
      if (data["Ghi ch√∫"]) parts.push(`${data["Ghi ch√∫"]}/`);

      tongTextEl.value = parts.join(" ");
      document.getElementById("tongHidden").value = tongTextEl.value.trim();
    }

    // --- G·∫Øn s·ª± ki·ªán t·ª± ƒë·ªông c·∫≠p nh·∫≠t ---
    document.querySelectorAll("input, select, textarea").forEach(el => {
      // Ch·ªâ c·∫≠p nh·∫≠t n·∫øu ph·∫ßn t·ª≠ thay ƒë·ªïi m√† KH√îNG ph·∫£i l√† √¥ T·ªïng h·ª£p
      if (el.id !== "tongText") {
        el.addEventListener("input", updateTong);
      }
    });

    // --- ƒê·ªìng b·ªô d·ªØ li·ªáu khi l∆∞u ---
    const tongText = document.getElementById("tongText");
    const tongHidden = document.getElementById("tongHidden");
    if (tongText && tongHidden) {
      tongText.addEventListener("input", () => {
        tongHidden.value = tongText.value.trim();
      });
    }


    // --- N√∫t l∆∞u ---
    document.getElementById("dataForm").addEventListener("submit", (e) => {
      // C·∫≠p nh·∫≠t √¥ t·ªïng h·ª£p v√†o input ·∫©n (c·ªôt O)
      const tongValue = document.getElementById("tongText").value.trim();
      document.getElementById("tongHidden").value = tongValue;
    });


    // --- Chuy·ªÉn v·ªÅ index m·ªü khung t√¨m ki·∫øm ---
    document.getElementById('searchBtn').addEventListener('click', e => {
      e.preventDefault();
      window.location.href = "index.html?openSearch=true";
    });
    // G·ªôp d·ªØ li·ªáu Pin + Th√¥ng s·ªë pin
    const pinSelect = document.getElementById("PinLevel");
    const thongSoPin = document.getElementById("ThongSoPin");
    const pinHidden = document.getElementById("PinHidden");
    // C·∫≠p nh·∫≠t d·ªØ li·ªáu m·ªói khi ng∆∞·ªùi d√πng thay ƒë·ªïi
    function updatePinValue() {
      const pinText = [pinSelect.value.trim(), thongSoPin.value.trim()]
        .filter(Boolean)
        .join(" ");
      pinHidden.value = pinText;
    }
    // L·∫Øng nghe s·ª± ki·ªán thay ƒë·ªïi
    if (pinSelect && thongSoPin) {
      pinSelect.addEventListener("change", updatePinValue);
      thongSoPin.addEventListener("input", updatePinValue);
    }


    document.addEventListener("DOMContentLoaded", updateTong);
    // Khi ng∆∞·ªùi d√πng nh·∫≠p ho·∫∑c s·ª≠a trong √¥ t·ªïng h·ª£p
  </script>
  <script src="app.js"></script>
</body>
</html>
